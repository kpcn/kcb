---
import type { CollectionEntry } from 'astro:content';
import Tags from '@components/Tags/Tags.astro';
import Icon from './Icon.astro';

import { formatDate } from '@utils/format';

interface Props {
  post: CollectionEntry<'blog'>;
}

const {
  post: { data, slug, id, render },
} = Astro.props;
const { remarkPluginFrontmatter } = await render();
const formattedPublishedDate = formatDate(data?.publishedAt);
---

<article
  id={id}
  class="flex w-full flex-col space-y-2 px-3 py-2 hover:bg-gradient-to-t hover:from-white hover:to-slate-50 hover:shadow-sm dark:hover:from-slate-600 dark:hover:to-slate-700 dark:hover:shadow-sm md:rounded-md"
>
  <a href={`/blog/${slug}`} class="cursor-pointer">
    <h1
      class="mb-1 font-firamono text-xl font-semibold tracking-wide text-gray-600 antialiased dark:text-slate-50"
    >
      {data.title}
    </h1>
    <div
      class="flex items-center space-x-7 py-1 text-gray-500 dark:text-slate-50"
    >
      <div class="flex items-center space-x-2">
        <Icon icon="calendar" class="h-5 w-5" />
        <span class="italic">{formattedPublishedDate}</span>
      </div>
      <div class="flex items-center space-x-2">
        <Icon icon="clock" class="h-5 w-5" />
        <span class="italic">
          {remarkPluginFrontmatter.minutesToRead}
        </span>
      </div>
    </div>
    <p
      class="py-1 font-firamono text-lg font-normal text-slate-700 antialiased dark:text-slate-50"
    >
      {data.excerpt}
    </p>
  </a>
  <Tags tags={data.tags || []} />
</article>
